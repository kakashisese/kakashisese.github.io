<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>nkoj p3000 【nodgd造水题】嵩嵩 | 用画笔记录生活</title>
<meta name="description" content="艺术就是生命">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="https://kakashisese.github.io/favicon.ico?v=1584870101683">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/papercss@1.6.1/dist/paper.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://kakashisese.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
  
    <nav class="navbar border fixed split-nav">
  <div class="nav-brand">
    <h3><a href="https://kakashisese.github.io">用画笔记录生活</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
      <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
        
          <li>
            
              <a href="/" class="menu">
                首页
              </a>
            
          </li>
        
          <li>
            
              <a href="/tags" class="menu">
                标签
              </a>
            
          </li>
        
          <li>
            
              <a href="/post/about" class="menu">
                关于
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div id="top" class="row site">
      <div class="sm-12 md-8 col">
        <div class="paper">
          <article class="article">
            <h1>nkoj p3000 【nodgd造水题】嵩嵩</h1>
            <p class="article-meta">
              2020-03-22
              
            </p>
            
            <div class="post-content">
              <h1 id="nkoj-p3000-nodgd造水题嵩嵩">nkoj p3000 【nodgd造水题】嵩嵩</h1>
<h2 id="问题描述">问题描述</h2>
<blockquote>
<p>受何老板之托，嵩嵩在美国为何老板采购的若干吨货物。这批货物已通过水路运送到了我国某沿海城市，现在需要通过公路将这些货物运送到何老板家。嵩嵩的地图上有N(2 &lt;= N &lt;= 200) 座城市，编号1到N，嵩嵩在1号城市，何老板的家在N号城市。这N座城市间有P(1 &lt;= P &lt;= 40,000) 条双向通行的道路相连，每条道路长度不超过1,000,000。两座城市间可能有多条道路相连。<br>
嵩嵩雇了T(1 &lt;= T &lt;= 200)辆卡车运送这批货物。为了避免被人发现或引起别人的注意，嵩嵩安排这T辆车选择不同的道路行驶，也就是同一条道路不会被走两次。<br>
请帮助嵩嵩安排这T辆车的线路，使得走过的总长度尽量短。<br>
嵩嵩向你保证在不走重复道路的情况下，一定能够把T车货物运到目的地。<br>
注意：题目中描述的“道路”相当于图论中的“边”。<br>
注：题目改编自NKOJ1605。其实是nodgd做1605的时候一开始读错题了，但是既然代码都写好了，总不能浪费了吧，所以就有了这道题！</p>
</blockquote>
<h2 id="输入格式">输入格式</h2>
<blockquote>
<p>第一行包括三个空格间隔的整数N,P,T。<br>
接下来P行，每行有三个空格间隔的整数A,B,C。表示城市A、B间有条长度为C的道路。</p>
</blockquote>
<h2 id="输出格式">输出格式</h2>
<blockquote>
<p>一整数，表示经过的道路总长度的最小值。</p>
</blockquote>
<h2 id="样例输入">样例输入</h2>
<blockquote>
<p>7 9 2<br>
1 2 2<br>
2 3 5<br>
3 7 5<br>
1 4 1<br>
4 3 1<br>
4 5 7<br>
5 7 1<br>
1 6 3<br>
6 7 3</p>
</blockquote>
<h2 id="样例输出">样例输出</h2>
<blockquote>
<p>13</p>
</blockquote>
<h3 id="一点小想法"><em><strong>一点小想法</strong></em></h3>
<blockquote>
<p>费用流模板题，把 <em><strong>1</strong></em> 看成原点 <em><strong>n</strong></em> 看成汇点，每条路的费用就是它的长度，每条路的容量为 <em><strong>1</strong></em>。<br>
只需要注意一点就是只有 <em><strong>t</strong></em> 辆货车，所以当最大流达到 <em><strong>t</strong></em> 时退出找增广路，输出此时的最小费用。</p>
</blockquote>
<h3 id="代码"><em><strong>代码</strong></em></h3>
<pre><code class="language-c">#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;
#include &lt;cstring&gt;
using namespace std;
const int Max = (40000 + 5) &lt;&lt; 3;
int Last[Max];
struct Eg {
    int Next, Child, Cost, Cap;
} egs[Max];
int n, p, t;
void addegs(int num, int fr, int to, int c, int v) {
    egs[num].Child = to;
    egs[num].Cap = c;
    egs[num].Cost = v;
    egs[num].Next = Last[fr];
    Last[fr] = num;
}
int dis[Max], maxflow, mincost, flow[Max], pre[Max], head[Max];
bool vis[Max];
queue&lt;int&gt; q;
bool spfa(int s, int t) {
    memset(dis, 127 / 2, sizeof(dis));
    memset(flow, 127 / 2, sizeof(flow));
    q.push(s);
    dis[s] = 0;
    vis[s] = true;
    pre[t] = -1;
    while(q.size()) {
        int u = q.front();
        q.pop();
        vis[u] = false;
        for (int i = Last[u]; i; i = egs[i].Next) {
            int v = egs[i].Child;
            if(egs[i].Cap &amp;&amp; dis[v] &gt; dis[u] + egs[i].Cost) {
                dis[v] = dis[u] + egs[i].Cost;
                pre[v] = u;
                head[v] = i;
                flow[v] = min(flow[u], egs[i].Cap);
                if(!vis[v]) {
                    vis[v] = true;
                    q.push(v);
                }
            }
        }
    }
    return pre[t] != -1;
}
int s, T;
void mcmf() {
    while(spfa(1, T) &amp;&amp; maxflow &lt; t) {
        int u = T;
        maxflow += flow[T];
        mincost += flow[T] * dis[T];
        while(u != s) {
            egs[head[u]].Cap -= flow[T];
            egs[head[u] ^ 1].Cap += flow[T];
            u = pre[u];
        }
    }
}

int main() {
    scanf(&quot;%d %d %d&quot;, &amp;n, &amp;p, &amp;t);
    int num = 2;
    for(int i = 1; i &lt;= p; i++) {
        int fr, to, c;
        scanf(&quot;%d %d %d&quot;, &amp;fr, &amp;to, &amp;c);
        addegs(num++, fr, to, 1, c);
        addegs(num++, to, fr, 0, -c);
        addegs(num++, to, fr, 1, c);
        addegs(num++, fr, to, 0, -c);
    }
    s = 1;
    T = n;
    mcmf();
    printf(&quot;%d&quot;, mincost);
    return 0;
}
</code></pre>

            </div>
          </article>
        </div>
        <div class="paper" data-aos="fade-in">
          
            <div class="next-post">
              <div class="next">
                下一篇
              </div>
              <a href="https://kakashisese.github.io/post/lougu-p1168-zhong-wei-shu/">
                <h3 class="post-title">
                  lougu P1168 中位数
                </h3>
              </a>
            </div>
          
        </div>
        
          
            <div class="paper" data-aos="fade-in">
              <div id="gitalk-container"></div>
            </div>
          

          
        
      </div>

      <div class="sm-12 md-4 col sidebar">
  <div class="paper info-container">
    <img src="https://kakashisese.github.io/images/avatar.png?v=1584870101683" class="no-responsive avatar">
    <div class="text-muted">艺术就是生命</div>
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      最新文章
    </div>
    <div class="row">
      <ul>
        
          
            <li>
              <a href="https://kakashisese.github.io/post/luogu-p1021-you-piao-mian-zhi-she-ji/">luogu p1021 邮票面值设计</a>
            </li>
          
        
          
            <li>
              <a href="https://kakashisese.github.io/post/nkoj-p3000-nodgd-zao-shui-ti-song-song/">nkoj p3000 【nodgd造水题】嵩嵩</a>
            </li>
          
        
          
            <li>
              <a href="https://kakashisese.github.io/post/lougu-p1168-zhong-wei-shu/">lougu P1168 中位数</a>
            </li>
          
        
          
            <li>
              <a href="https://kakashisese.github.io/post/wang-luo-liu-24-ti-da-pei-fei-xing-yuan/">「网络流 24 题」搭配飞行员</a>
            </li>
          
        
          
            <li>
              <a href="https://kakashisese.github.io/post/about/">关于</a>
            </li>
          
        
          
            <li>
              <a href="https://kakashisese.github.io/post/hello-gridea/">Hello Gridea</a>
            </li>
          
        
      </ul>
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      标签列表
    </div>
    <div class="row">
      
        <a href="https://kakashisese.github.io/tag/lf3D6LbX8/" class="badge warning">
          Gridea
        </a>
      
    </div>
  </div>
  <div class="paper">
    Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://kakashisese.github.io/atom.xml" target="_blank">RSS</a>
  </div>
</div>


    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: '',
        owner: '',
        admin: [''],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
